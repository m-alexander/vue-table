(function(e){function t(t){for(var i,o,l=t[0],a=t[1],c=t[2],d=0,f=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,l=1;l<n.length;l++){var a=n[l];0!==r[a]&&(i=!1)}i&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={app:0},s=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/docs/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=a;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"211f":function(e,t,n){"use strict";var i=n("c846"),r=n.n(i);r.a},"3af9":function(e,t,n){"use strict";var i=n("ef2f"),r=n.n(i);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("main",[n("Table",{attrs:{rows:e.rows,columns:e.columns}})],1)])},s=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"datagrid",attrs:{tabindex:e.tabindex},on:{keydown:e.onKeyDown}},[n("Header",{ref:"header",attrs:{columns:e.columns}}),n("Body",{ref:"body",attrs:{rows:e.rows,columns:e.columns},on:{scroll:function(t){return e.onBodyScroll()}}})],1)},l=[],a=(n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"datagrid__header",on:{mousemove:e.onResize,mouseup:e.onStopResize,mouseleave:e.onStopResize}},[n("TableRow",e._l(e.columns,(function(t,i){return n("HeaderCell",{key:t.field,attrs:{index:i,title:t.title,resizable:e.isResizable(i)},on:{startResize:function(t){return e.onStartResize(t,i)}}})})),1)],1)}),c=[],u=(n("ac6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"datagrid-header-cell"},[n("TableCell",{staticClass:"datagrid-header-cell__title",attrs:{index:e.index}},[e._v(e._s(e.title))]),e.resizable?n("div",{staticClass:"datagrid-header-cell__grip",on:{mousedown:function(t){return e.$emit("startResize",t)}}}):e._e()],1)}),d=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"datagrid__cell",style:e.styles},[e._t("default")],2)},h=[],p={props:{index:Number},computed:{styles:function(){return{textAlign:"var(--column-align-".concat(this.index,")")}}}},m=p,w=(n("873f"),n("2877")),b=Object(w["a"])(m,f,h,!1,null,null,null),g=b.exports,v={components:{TableCell:g},props:["title","resizable","index"]},y=v,_=(n("211f"),Object(w["a"])(y,u,d,!1,null,null,null)),R=_.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"datagrid__row",class:e.classes,on:{click:function(t){return e.$emit("click",t)},dblclick:function(t){return e.$emit("dblclick",t)}}},[e._t("default")],2)},$=[],O={props:{selected:{type:Boolean,default:!1}},computed:{classes:function(){return{"datagrid__row--selected":this.selected}}}},k=O,S=(n("a637"),Object(w["a"])(k,x,$,!1,null,null,null)),z=S.exports,C={components:{HeaderCell:R,TableRow:z},props:["columns"],data:function(){return{startOffset:0,startWidth:0,resizingIndex:-1,columnsWidth:[]}},mounted:function(){this.columnsWidth=this.columns.map((function(e){return e.width||100}));var e=this.$parent.$el.style;this.columns.forEach((function(t,n){var i=t.align||"left";e.setProperty("--column-align-".concat(n),i)}))},methods:{onStartResize:function(e,t){this.startOffset=e.pageX,this.startWidth=this.columnsWidth[t],this.resizingIndex=t},onResize:function(e){if(this.resizingIndex>-1){var t=Math.max(this.startWidth+(e.pageX-this.startOffset),48);this.$set(this.columnsWidth,this.resizingIndex,t)}},onStopResize:function(){this.resizingIndex=-1},isResizable:function(e){return this.columns[e].width}},watch:{columnsWidth:function(e){var t=e.map((function(e){return"".concat(e,"px")})).join(" ");this.$parent.$el.style.setProperty("--columns-width",t)}}},T=C,j=(n("ce62"),Object(w["a"])(T,a,c,!1,null,null,null)),P=j.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"datagrid__body",on:{"&scroll":function(t){return e.onScroll(t)}}},[n("div",{style:e.containerStyles},e._l(e.visibleRows,(function(t){return n("TableRow",{key:t._id,attrs:{selected:e.isSelected(t)},on:{click:function(n){return e.selectRow(n,t)},dblclick:function(n){return e.onOpen(t)}}},e._l(e.columns,(function(i,r){return n("TableCell",{key:i.field,attrs:{index:r}},[e._v(e._s(t[i.field]))])})),1)})),1)])},A=[],E={components:{TableRow:z,TableCell:g},props:{rows:Array,columns:Array},data:function(){return{selectedRows:[],visibleRows:[],firstVisible:0}},mounted:function(){this.updateVidibleRows()},methods:{onOpen:function(e){console.log(e)},selectRow:function(e,t){e.ctrlKey?this.selectedRows.push(t):this.selectedRows=[t]},isSelected:function(e){return-1!==this.selectedRows.indexOf(e)},onScroll:function(){this.$emit("scroll"),this.updateVidibleRows()},onKeyDown:function(e){var t=parseFloat(getComputedStyle(this.$el).getPropertyValue("--row-height")),n=this.$el.getBoundingClientRect().height,i=~~(n/t);switch(e.key){case"ArrowUp":this.selectNearRow(!1);break;case"ArrowDown":this.selectNearRow(!0);break;case"PageUp":this.selectNearRow(!1,i);break;case"PageDown":this.selectNearRow(!0,i);break;case"Home":this.selectNearRow(!1,this.rows.length);break;case"End":this.selectNearRow(!0,this.rows.length);break}},selectNearRow:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e?t:-t,i=e?this.rows.length-1:0,r=this.selectedRows[this.selectedRows.length-1],s=this.rows.indexOf(r),o=this.rows[s+n]?s+n:i;this.selectedRows=[this.rows[o]],this.showRow(o,e)},showRow:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=parseFloat(getComputedStyle(this.$el).getPropertyValue("--row-height")),r=e*i,s=this.$el.getBoundingClientRect().height,o=this.$el.scrollTop,l=o+s,a=r>=o&&r+i<=l;a||this.$nextTick((function(){t.$el.scrollTop=n?r-s+i:r}))},updateVidibleRows:function(){var e=parseFloat(getComputedStyle(this.$el).getPropertyValue("--row-height")),t=this.$el?~~(this.$el.getBoundingClientRect().height/e):20,n=Math.max(0,~~(this.$el.scrollTop/e)-t/2),i=Math.min(n+2*t,this.rows.length);this.visibleRows=this.rows.slice(n,i),this.firstVisible=n}},computed:{containerStyles:function(){return{height:"calc(var(--row-height) * ".concat((this.rows||[]).length,")"),paddingTop:"calc(var(--row-height) * ".concat(this.firstVisible,")")}}}},V=E,B=(n("3af9"),Object(w["a"])(V,N,A,!1,null,null,null)),W=B.exports,D={components:{Header:P,Body:W},props:{rows:Array,columns:Array,tabindex:{type:Number,default:0}},mounted:function(){this.observeResize()},methods:{onBodyScroll:function(){if(this.$refs.body){var e=this.$refs.body.$el;this.$refs.header.$el.style.marginLeft="-"+e.scrollLeft+"px"}},onKeyDown:function(e){this.$refs.body.onKeyDown(e)}}},M=D,I=(n("b671"),Object(w["a"])(M,o,l,!1,null,null,null)),H=I.exports,K=(n("6c7b"),n("359c")),F=n.n(K),J={tabs:Array(10).fill(!0).map((function(){return{title:F.a.commerce.productName(),text:F.a.lorem.text()}})),rows:Array(1e4).fill(!0).map((function(e,t){var n=F.a.commerce.price(),i=F.a.random.number(5)+1;return{_id:t+1,title:F.a.commerce.productName(),price:n,amount:i,sum:n*i}})),columns:[{title:"ID",field:"_id",width:50,align:"right"},{title:"Наименование",field:"title",width:250,align:"left"},{title:"Цена",field:"price",width:100,align:"right"},{title:"Количество",field:"amount",width:100,align:"right"},{title:"Сумма",field:"sum",width:100,align:"right"}]},L={components:{Table:H},data:function(){return{rows:J.rows,columns:J.columns}}},U=L,X=(n("7faf"),Object(w["a"])(U,r,s,!1,null,null,null)),q=X.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(q)}}).$mount("#app")},"5bb1":function(e,t,n){},"7faf":function(e,t,n){"use strict";var i=n("8fba"),r=n.n(i);r.a},"873f":function(e,t,n){"use strict";var i=n("f78c"),r=n.n(i);r.a},"8fba":function(e,t,n){},a637:function(e,t,n){"use strict";var i=n("c6f1"),r=n.n(i);r.a},b671:function(e,t,n){"use strict";var i=n("5bb1"),r=n.n(i);r.a},bb5a:function(e,t,n){},c6f1:function(e,t,n){},c846:function(e,t,n){},ce62:function(e,t,n){"use strict";var i=n("bb5a"),r=n.n(i);r.a},ef2f:function(e,t,n){},f78c:function(e,t,n){}});
//# sourceMappingURL=app.6df2cff8.js.map