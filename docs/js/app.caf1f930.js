webpackJsonp([1],{0:function(e,t,i){e.exports=i("NHnr")},"6umP":function(e,t){},Gwqi:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("/5sW"),s=(i("9Yib"),i("A0n/"),i("fx22"),{props:{index:Number},computed:{styles:function(){return{textAlign:"var(--column-align-".concat(this.index,")")}}}}),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"datagrid__cell",style:e.styles},[e._t("default")],2)},l=[],r=i("XyMi");function a(e){i("Gwqi")}var c=!1,u=a,d=null,h=null,f=Object(r["a"])(s,o,l,c,u,d,h),m=f.exports,p={components:{TableCell:m},props:["title","resizable","index"]},w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"datagrid-header-cell"},[i("TableCell",{staticClass:"datagrid-header-cell__title",attrs:{index:e.index}},[e._v(e._s(e.title))]),e.resizable?i("div",{staticClass:"datagrid-header-cell__grip",on:{mousedown:function(t){e.$emit("startResize",t)}}}):e._e()],1)},g=[];function b(e){i("zWwJ")}var v=!1,y=b,R=null,_=null,x=Object(r["a"])(p,w,g,v,y,R,_),$=x.exports,z={props:{selected:{type:Boolean,default:!1}},computed:{classes:function(){return{"datagrid__row--selected":this.selected}}}},C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"datagrid__row",class:e.classes,on:{click:function(t){e.$emit("click",t)},dblclick:function(t){e.$emit("dblclick",t)}}},[e._t("default")],2)},k=[];function O(e){i("6umP")}var S=!1,T=O,N=null,W=null,A=Object(r["a"])(z,C,k,S,T,N,W),P=A.exports,j={components:{HeaderCell:$,TableRow:P},props:["columns"],data:function(){return{startOffset:0,startWidth:0,resizingIndex:-1,columnsWidth:[]}},mounted:function(){this.columnsWidth=this.columns.map(function(e){return e.width||100});var e=this.$parent.$el.style;this.columns.forEach(function(t,i){var n=t.align||"left";e.setProperty("--column-align-".concat(i),n)})},methods:{onStartResize:function(e,t){this.startOffset=e.pageX,this.startWidth=this.columnsWidth[t],this.resizingIndex=t},onResize:function(e){if(this.resizingIndex>-1){var t=Math.max(this.startWidth+(e.pageX-this.startOffset),48);this.$set(this.columnsWidth,this.resizingIndex,t)}},onStopResize:function(){this.resizingIndex=-1},isResizable:function(e){return this.columns[e].width}},watch:{columnsWidth:function(e){var t=e.map(function(e){return"".concat(e,"px")}).join(" ");this.$parent.$el.style.setProperty("--columns-width",t)}}},E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"datagrid__header",on:{mousemove:e.onResize,mouseup:e.onStopResize,mouseleave:e.onStopResize}},[i("TableRow",e._l(e.columns,function(t,n){return i("HeaderCell",{key:t.field,attrs:{index:n,title:t.title,resizable:e.isResizable(n)},on:{startResize:function(t){e.onStartResize(t,n)}}})}))],1)},V=[];function B(e){i("pFFW")}var F=!1,D=B,H=null,M=null,q=Object(r["a"])(j,E,V,F,D,H,M),I=q.exports,K={components:{TableRow:P,TableCell:m},props:{rows:Array,columns:Array},data:function(){return{selectedRows:[],visibleRows:[],firstVisible:0}},mounted:function(){this.updateVidibleRows()},methods:{onOpen:function(e){console.log(e)},selectRow:function(e,t){e.ctrlKey?this.selectedRows.push(t):this.selectedRows=[t]},isSelected:function(e){return-1!==this.selectedRows.indexOf(e)},onScroll:function(){this.$emit("scroll"),this.updateVidibleRows()},onKeyDown:function(e){var t=parseFloat(getComputedStyle(this.$el).getPropertyValue("--row-height")),i=this.$el.getBoundingClientRect().height,n=~~(i/t);switch(e.key){case"ArrowUp":this.selectNearRow(!1);break;case"ArrowDown":this.selectNearRow(!0);break;case"PageUp":this.selectNearRow(!1,n);break;case"PageDown":this.selectNearRow(!0,n);break;case"Home":this.selectNearRow(!1,this.rows.length);break;case"End":this.selectNearRow(!0,this.rows.length);break}},selectNearRow:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e?t:-t,n=e?this.rows.length-1:0,s=this.selectedRows[this.selectedRows.length-1],o=this.rows.indexOf(s),l=this.rows[o+i]?o+i:n;this.selectedRows=[this.rows[l]],this.showRow(l,e)},showRow:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=parseFloat(getComputedStyle(this.$el).getPropertyValue("--row-height")),s=e*n,o=this.$el.getBoundingClientRect().height,l=this.$el.scrollTop,r=l+o,a=s>=l&&s+n<=r;a||this.$nextTick(function(){t.$el.scrollTop=i?s-o+n:s})},updateVidibleRows:function(){var e=parseFloat(getComputedStyle(this.$el).getPropertyValue("--row-height")),t=this.$el?~~(this.$el.getBoundingClientRect().height/e):20,i=Math.max(0,~~(this.$el.scrollTop/e)-t/2),n=Math.min(i+2*t,this.rows.length);this.visibleRows=this.rows.slice(i,n),this.firstVisible=i}},computed:{containerStyles:function(){return{height:"calc(var(--row-height) * ".concat((this.rows||[]).length,")"),paddingTop:"calc(var(--row-height) * ".concat(this.firstVisible,")")}}}},J=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"datagrid__body",on:{"&scroll":function(t){return e.onScroll(t)}}},[i("div",{style:e.containerStyles},e._l(e.visibleRows,function(t){return i("TableRow",{key:t._id,attrs:{selected:e.isSelected(t)},on:{click:function(i){e.selectRow(i,t)},dblclick:function(i){e.onOpen(t)}}},e._l(e.columns,function(n,s){return i("TableCell",{key:n.field,attrs:{index:s}},[e._v(e._s(t[n.field]))])}))}))])},X=[];function Y(e){i("o0cb")}var G=!1,L=Y,U=null,Q=null,Z=Object(r["a"])(K,J,X,G,L,U,Q),ee=Z.exports,te={components:{Header:I,Body:ee},props:{rows:Array,columns:Array,tabindex:{type:Number,default:0}},mounted:function(){this.observeResize()},methods:{onBodyScroll:function(){if(this.$refs.body){var e=this.$refs.body.$el;this.$refs.header.$el.style.marginLeft="-"+e.scrollLeft+"px"}},onKeyDown:function(e){this.$refs.body.onKeyDown(e)},observeResize:function(){}}},ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"datagrid",attrs:{tabindex:e.tabindex},on:{keydown:e.onKeyDown}},[i("Header",{ref:"header",attrs:{columns:e.columns}}),i("Body",{ref:"body",attrs:{rows:e.rows,columns:e.columns},on:{scroll:function(t){e.onBodyScroll()}}})],1)},ne=[];function se(e){i("vhaq")}var oe=!1,le=se,re=null,ae=null,ce=Object(r["a"])(te,ie,ne,oe,le,re,ae),ue=ce.exports,de=(i("No4x"),i("FfS/")),he=i.n(de),fe={tabs:Array(10).fill(!0).map(function(){return{title:he.a.commerce.productName(),text:he.a.lorem.text()}}),rows:Array(1e4).fill(!0).map(function(e,t){var i=he.a.commerce.price(),n=he.a.random.number(5)+1;return{_id:t+1,title:he.a.commerce.productName(),price:i,amount:n,sum:i*n}}),columns:[{title:"ID",field:"_id",width:50,align:"right"},{title:"Наименование",field:"title",width:250,align:"left"},{title:"Цена",field:"price",width:100,align:"right"},{title:"Количество",field:"amount",width:100,align:"right"},{title:"Сумма",field:"sum",width:100,align:"right"}]},me={components:{Table:ue},data:function(){return{rows:fe.rows,columns:fe.columns}}},pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("main",[i("Table",{attrs:{rows:e.rows,columns:e.columns}})],1)])},we=[];function ge(e){i("OYMq")}var be=!1,ve=ge,ye=null,Re=null,_e=Object(r["a"])(me,pe,we,be,ve,ye,Re),xe=_e.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(xe)}}).$mount("#app")},OYMq:function(e,t){},o0cb:function(e,t){},pFFW:function(e,t){},vhaq:function(e,t){},zWwJ:function(e,t){}},[0]);
//# sourceMappingURL=app.caf1f930.js.map