(function(t){function e(e){for(var i,o,l=e[0],a=e[1],c=e[2],d=0,f=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,l=1;l<n.length;l++){var a=n[l];0!==r[a]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},r={app:0},s=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/vue-table/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=a;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"211f":function(t,e,n){"use strict";var i=n("c846"),r=n.n(i);r.a},"3af9":function(t,e,n){"use strict";var i=n("ef2f"),r=n.n(i);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("main",[n("Table",{attrs:{rows:t.rows,columns:t.columns}})],1)])},s=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datagrid",attrs:{tabindex:t.tabindex},on:{keydown:t.onKeyDown}},[n("Header",{ref:"header",attrs:{columns:t.columns}}),n("Body",{ref:"body",attrs:{rows:t.rows,columns:t.columns},on:{scroll:function(e){return t.onBodyScroll()}}})],1)},l=[],a=(n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datagrid__header",on:{mousemove:t.onResize,mouseup:t.onStopResize,mouseleave:t.onStopResize}},[n("TableRow",t._l(t.columns,(function(e,i){return n("HeaderCell",{key:e.field,attrs:{index:i,title:e.title,resizable:t.isResizable(i)},on:{startResize:function(e){return t.onStartResize(e,i)}}})})),1)],1)}),c=[],u=(n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datagrid-header-cell"},[n("TableCell",{staticClass:"datagrid-header-cell__title",attrs:{index:t.index}},[t._v(t._s(t.title))]),t.resizable?n("div",{staticClass:"datagrid-header-cell__grip",on:{mousedown:function(e){return t.$emit("startResize",e)}}}):t._e()],1)}),d=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datagrid__cell",style:t.styles},[t._t("default")],2)},h=[],p={props:{index:Number},computed:{styles:function(){return{textAlign:"var(--column-align-".concat(this.index,")")}}}},m=p,w=(n("873f"),n("2877")),b=Object(w["a"])(m,f,h,!1,null,null,null),g=b.exports,v={components:{TableCell:g},props:["title","resizable","index"]},y=v,_=(n("211f"),Object(w["a"])(y,u,d,!1,null,null,null)),R=_.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datagrid__row",class:t.classes,on:{click:function(e){return t.$emit("click",e)},dblclick:function(e){return t.$emit("dblclick",e)}}},[t._t("default")],2)},$=[],O={props:{selected:{type:Boolean,default:!1}},computed:{classes:function(){return{"datagrid__row--selected":this.selected}}}},k=O,S=(n("a637"),Object(w["a"])(k,x,$,!1,null,null,null)),C=S.exports,z={components:{HeaderCell:R,TableRow:C},props:["columns"],data:function(){return{startOffset:0,startWidth:0,resizingIndex:-1,columnsWidth:[]}},mounted:function(){this.columnsWidth=this.columns.map((function(t){return t.width||100}));var t=this.$parent.$el.style;this.columns.forEach((function(e,n){var i=e.align||"left";t.setProperty("--column-align-".concat(n),i)}))},methods:{onStartResize:function(t,e){this.startOffset=t.pageX,this.startWidth=this.columnsWidth[e],this.resizingIndex=e},onResize:function(t){if(this.resizingIndex>-1){var e=Math.max(this.startWidth+(t.pageX-this.startOffset),48);this.$set(this.columnsWidth,this.resizingIndex,e)}},onStopResize:function(){this.resizingIndex=-1},isResizable:function(t){return this.columns[t].width}},watch:{columnsWidth:function(t){var e=t.map((function(t){return"".concat(t,"px")})).join(" ");this.$parent.$el.style.setProperty("--columns-width",e)}}},T=z,j=(n("ce62"),Object(w["a"])(T,a,c,!1,null,null,null)),P=j.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"datagrid__body",on:{"&scroll":function(e){return t.onScroll(e)}}},[n("div",{style:t.containerStyles},t._l(t.visibleRows,(function(e){return n("TableRow",{key:e._id,attrs:{selected:t.isSelected(e)},on:{click:function(n){return t.selectRow(n,e)},dblclick:function(n){return t.onOpen(e)}}},t._l(t.columns,(function(i,r){return n("TableCell",{key:i.field,attrs:{index:r}},[t._v(t._s(e[i.field]))])})),1)})),1)])},A=[],E={components:{TableRow:C,TableCell:g},props:{rows:Array,columns:Array},data:function(){return{selectedRows:[],visibleRows:[],firstVisible:0}},mounted:function(){this.updateVidibleRows()},methods:{onOpen:function(t){console.log(t)},selectRow:function(t,e){t.ctrlKey?this.selectedRows.push(e):this.selectedRows=[e]},isSelected:function(t){return-1!==this.selectedRows.indexOf(t)},onScroll:function(){this.$emit("scroll"),this.updateVidibleRows()},onKeyDown:function(t){var e=parseFloat(getComputedStyle(this.$el).getPropertyValue("--row-height")),n=this.$el.getBoundingClientRect().height,i=~~(n/e);switch(t.key){case"ArrowUp":this.selectNearRow(!1);break;case"ArrowDown":this.selectNearRow(!0);break;case"PageUp":this.selectNearRow(!1,i);break;case"PageDown":this.selectNearRow(!0,i);break;case"Home":this.selectNearRow(!1,this.rows.length);break;case"End":this.selectNearRow(!0,this.rows.length);break}},selectNearRow:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t?e:-e,i=t?this.rows.length-1:0,r=this.selectedRows[this.selectedRows.length-1],s=this.rows.indexOf(r),o=this.rows[s+n]?s+n:i;this.selectedRows=[this.rows[o]],this.showRow(o,t)},showRow:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=parseFloat(getComputedStyle(this.$el).getPropertyValue("--row-height")),r=t*i,s=this.$el.getBoundingClientRect().height,o=this.$el.scrollTop,l=o+s,a=r>=o&&r+i<=l;a||this.$nextTick((function(){e.$el.scrollTop=n?r-s+i:r}))},updateVidibleRows:function(){var t=parseFloat(getComputedStyle(this.$el).getPropertyValue("--row-height")),e=this.$el?~~(this.$el.getBoundingClientRect().height/t):20,n=Math.max(0,~~(this.$el.scrollTop/t)-e/2),i=Math.min(n+2*e,this.rows.length);this.visibleRows=this.rows.slice(n,i),this.firstVisible=n}},computed:{containerStyles:function(){return{height:"calc(var(--row-height) * ".concat((this.rows||[]).length,")"),paddingTop:"calc(var(--row-height) * ".concat(this.firstVisible,")")}}}},V=E,B=(n("3af9"),Object(w["a"])(V,N,A,!1,null,null,null)),W=B.exports,D={components:{Header:P,Body:W},props:{rows:Array,columns:Array,tabindex:{type:Number,default:0}},methods:{onBodyScroll:function(){if(this.$refs.body){var t=this.$refs.body.$el;this.$refs.header.$el.style.marginLeft="-"+t.scrollLeft+"px"}},onKeyDown:function(t){this.$refs.body.onKeyDown(t)}}},M=D,I=(n("b671"),Object(w["a"])(M,o,l,!1,null,null,null)),H=I.exports,K=(n("6c7b"),n("359c")),F=n.n(K),J={tabs:Array(10).fill(!0).map((function(){return{title:F.a.commerce.productName(),text:F.a.lorem.text()}})),rows:Array(1e4).fill(!0).map((function(t,e){var n=F.a.commerce.price(),i=F.a.random.number(5)+1;return{_id:e+1,title:F.a.commerce.productName(),price:n,amount:i,sum:n*i}})),columns:[{title:"ID",field:"_id",width:50,align:"right"},{title:"Наименование",field:"title",width:250,align:"left"},{title:"Цена",field:"price",width:100,align:"right"},{title:"Количество",field:"amount",width:100,align:"right"},{title:"Сумма",field:"sum",width:100,align:"right"}]},L={components:{Table:H},data:function(){return{rows:J.rows,columns:J.columns}}},U=L,X=(n("7faf"),Object(w["a"])(U,r,s,!1,null,null,null)),q=X.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(q)}}).$mount("#app")},"5bb1":function(t,e,n){},"7faf":function(t,e,n){"use strict";var i=n("8fba"),r=n.n(i);r.a},"873f":function(t,e,n){"use strict";var i=n("f78c"),r=n.n(i);r.a},"8fba":function(t,e,n){},a637:function(t,e,n){"use strict";var i=n("c6f1"),r=n.n(i);r.a},b671:function(t,e,n){"use strict";var i=n("5bb1"),r=n.n(i);r.a},bb5a:function(t,e,n){},c6f1:function(t,e,n){},c846:function(t,e,n){},ce62:function(t,e,n){"use strict";var i=n("bb5a"),r=n.n(i);r.a},ef2f:function(t,e,n){},f78c:function(t,e,n){}});
//# sourceMappingURL=app.d34fb9f9.js.map